*** Squeak 5.3 Release Notes ***!!!!!! WORK IN PROGRESS !!!!!!- Exhaustive refactoring of DateAndTime (Chronology)- improved SistaV1 compatibility (not yet activated)- faster arithmetics (integer), more correct arithmetics (float)- clean-up effort (implementors of #cleanUp: and #cleanUp?)TODO: asSimpleSetter, isSimpleSetter (already in trunk?)NEXT: Morphic packageDetailed Improvementsin Language, Tools, and the Environment~~~ Core Language ~~~Kernel- Refactors CompiledCode >> #literalsDo: to support CompiledBlock (SistaV1) and always-thorough literal lookup- Accelerate LargeInteger asFloat in 64bits images- Accelerate mixed Integer/Fraction comparison- Accelerate some huge-Integer arithmetic- Adds #isDeprecated on code objects to be used in programming tools- Adds BlockClosure >> #on:ensure: besides #on:do: as a convenient way to clean-up but pass on the exception- Speeds up deletion of class variables or shared pools- Introduce configurable parameters for tuning the Large*Integer arithmetic thresholds.- Improved implementations of #sqrt- Fixes that (0 bitShift: 100) is normalized and not a large-integer zero- Refactors the fast Large*Integer operations- The faster multiplication algorithm is now the default for multiplying integers- Adds CompiledMethod >> #pragmasAt: for convenient access to multiple pragmas of the same pragma selector.- Improves Promise resolution error handling and adds some utility methods- Several fixes in simulation code (e.g. primitive 188)- Improves compatibility between 32-bit and 64-bit systems for LargePositiveInteger hash- Adds Object >> #changeClassTo: as a more readable form of Behavior >> #adoptInstance:.- Harmonize method references and class references.Collections- Adds Text >> #format:- Fixes #collect:as: for Set into Dictionary- Adds String >> #findFeatures, which is simple analysis of natural language in source code. No word stemming. Interface is similar to #findTokens- Adds Collection >> #any: and Collection >> #take:. Works like #first: for sequenceable collections. #take does not fail if collection is too small.- Adds Collection >> #log2, since it already responds to #ln and #log- Adds Collection >> #isOfSameSizeCheck:, similar to #emptyCheck- When creating a text from a string and runs, check whether the run length matches string length- Definitively abandon SequenceableCollection equality tests based on equal species. Old behaviour can still be obtained through #hasEqualElements: but the default is to not try to support such trans-class equality feature because it is much too complex.- Better performance in some String functions- Better performance in some HashedCollection functions- Better performance in some SequenceableCollection functions- Fixes an endless-loop bug in HtmlReadWriter- Changes in ifEmpty:ifNotEmpty: -- Replace the few sends to #valueWithPossibleArgument: with #cull: because there is no need to expect blocks with more than one argument to be filled with nils.Chronology- Change the internal representation of DateAndTime as described on http://wiki.squeak.org/squeak/6197 - original development at http://www.squeaksource.com/UTCDateAndTime - "UTCDateAndTime is a UTC based implementation of class DateAndTime with one instance variable representing the magnitude of the point in time, and another representing local time zone offset."- Adds Time class >> #highResClock - might not be available in your VM (or machine)- Adds Time class >> #nanosecondsToRun: besides #microsecondsToRun: and #millisecondsToRun:; also see BlockClosure >> #durationToRunCompiler- Fixes ifNil:ifNotNil: decompilation- Fixes decompilation of full blocks- Always quote parser error notifications (also in interactive mode) to make syntax highlighting work in tools- Fixes in EncoderForSistaV1- Fixes in HeapEnvironments- ...Traits- ...PackageInfo- Adds convenience messages to look up packages in the package organizer by name~~~ Graphics & Sound ~~~Graphics- Improved implementation of named colors such as Color banana, which speeds up Color >> #name- Fixes in the HTML representation of colors- Adds infix versions for creating rectangles from points around a center- Improved support for virtual displays- Font-size summary now has proper formatting to match the respective font faces- Improved Form implementation to better fit Spur (memory model)Balloon- ...TrueType (Fonts)- ...Sound- Use a byte-oriented file stream to read MIDI files, and ensure the file is closed on reading.~~~ Network ~~~Network- For the FileList tool, fixes an endless cycle when listing server directories that miss login credentials.- Better comments in FTPClient- Improves mail-address tokenizationSqueakSSL- ...WebClient- ...XML- ...~~~ System Services & Files ~~~Files- Deprecates classes and methods related to executing Squeak in a web browser through a browser plugin. They can be loaded through the 60Deprecated-NSPlugin-System-Support package.Compression- ...Regex- ...System- Improves implementation of system-change events- Navigation makes use of String >> #findFeatures to improve the quality of class/trait search- VM can be instructed to #sendMouseWheelEvents, which depends on the VM version to work- Fixes in SmartRefStream- Fixes the bug with entering/leaving projects that change the display depth.~~~ GUI Frameworks ~~~ST80- ...Morphic- All references to the global variable "World" got replaced with "Project current world"; "ActiveWorld" is more trickier because it acts as a DynamicVariable in disguise. :-)Etoys- ...~~~ Help & Internationalization ~~~GetText- ...Multilingual- Improvements in various text converters- UTF16TextConverter will now take endianness into account when writing the BOM- Fix and unify Unicode data downloadingHelp- ...~~~ Programming Tools ~~~Tools (ToolBuilder, CommandLine, Protocols)- In code browsers, highlight deprecated messages in message lists- Refactors the implementation of Debugger wrt. Project and ToolSet, which should simplify the creation of a custom project or toolset. There is now a MorphicDebugger and MVCDebugger.- Code clean-up in ChangeSorter, ChangeSet, and ChangesOrganizer- Many fixes and improvements in the Vocabulary/Protocols/Lexicon tool- Fix syntax highlighting in SyntaxError tool- In inspectors and object explorers, fixes "explore pointers" and "chase pointers" for CompiledCode. Now you can chase pointers to symbols. Try it!!- Adds object dragging in ChangeSorter lists- Minor fixes in MethodFinder (aka. "Selector Browser")- Minor fixes in MessageTrace- Fix a bug with DebuggerMethodMap and full blocks (Sista V1 bytecode set).- Debugger remembers last window extent to be restored in the next debugging sessionPreferences (Browser, Wizard)- Browser shows old-style preferences in a more readable way- Browser shows code snippet for each preference- Wizard offers to install extra packages- Wizard offers scroll bars for small displaysSUnit- Measures time-to-run during test execution, excluding time to set up test resources- Adds time-to-run and number-of-tests to test runner GUINebraska- ...Services- ...Shout (Syntax Highlighting)- ...~~~ Version Control & Package Management ~~~Installer (VersionNumber, UpdateStream, Squeak-Version)- Fixes bug in Metacello update code in Installer. Only occurred when calling #ensureRecentMetacello in an image that has Metacello installed already.- Auto-install Metacello if necessary when a Metacello load script is executed- Adds an OCompletion package-definition; also see PreferenceWizardMorph >> #installAutoComplete for a Metacello versionMonticello- Refactors Monticello tools to directly use the ChangeSet class for accessing change sets. - Warn about false ancestors through a bold-red label in the GUI- Allow up to 3 attempts to access the repository, to allow for network slowness etc. Pass the exception up if we still don't get what we want.- Speeds up MCDefinitionIndex- Improves robustness for missing times in time stamps, needed to see the history of certain Balloon packagesSqueakMap- ...~~~ Deployment & Misc. ~~~Tests- There are over 4500 tests in this release.ReleaseBuilder- ...Major Deprecations- Debugging interface in ToolSet changed, which also deprecates some #debug* messages- RunArray >> #addLast:times:- HTTPClient should not be used anymore in favor of WebClient.- StandardFileMenu should not be used anymore in favor of new file dialogs- HashedCollection >> #findElementOrNil: and #fullCheck- Symbol class >> #internCharacter:. There is no need for a character table anymore because all characters are immediate.- Object >> #notifyWithLabel:Known Issues (same as in 5.2 ???)- List filtering in multi-selection lists may break sometimes, i.e. in the TestRunner- Collecting colors via Form >> #collectColors: might lead to unexpected results because the Color black will be treated as transparent color here.- SqueakSSL has no SAN support for all platforms. This can be the reason why https://www.github.com cannot be accessed but https://github.com works.- There can be issues when using interface languages other than English due to automatic translation. This will be addressed in future releases.- You cannot apply a user interface theme from within MVC.- Some core packages depend on Etoys packages in this release. These depenencides will be removed in future releses- The UTF text converters might accept invalid character sequences- On some virtual machines a FloatTest can failCompatibility Notes- The deprecated classes ContextPart, BlockContext, and MethodContext are back but should not be used anymore in favor of Context.- The lookup of literals in code objects is now always thorough.- There is no #asReference anymore. Use #asCodeReference instead.!]style[(32 2 24 317 61 3 21 2 6 259 13 226 24 82 5 127 31 12 7 33 29 83 7 41 15 153 25 69 17 5 16 3 11 8 16 53 23 124 19 5 20 106 19 51 33 146 22 239 6 40 16 40 22 42 14 197 10 41 11 17 34 27 42 3 192 8 27 57 32 63 30 2 8 234 12 8 6 8 11 32 16 36 24 2 8 51 12 18 15 52 14 185 4 51 7 8 16 8 5 99 15 2 7 131 9 39 9 8 9 8 3 9 31 2 5 45 33 105 11 8 5 8 6 77 23 27 18 196 22 2 4 8 7 178 5 9 35 2 7 8 12 165 4 9 25 2 43 31 10 178 15 5 11 104 28 35 11 147 7 294 29 201 6 146 8 8 8 8 27 9 44 2 55 167 9 77 18 11 45 26 10 444 9 9 26 2 5 18 10 19 14 9 18 26 7 136 9 60 16 59 33 25 15 78 13 1 19 76 10 25 23 95 4 4 9 8 3 55 22 24 18 51 9 147 3 214 9 11 19 123 7 30 12 65 16 9)b,,cred;b,,b,,bf5cgray;,,i,,Rcode://#isDeprecated;,,Rcode://LargePositiveInteger class >> #thresholdForDiv21;,,Rcode://#sqrt;,,Rcode://#multiplyByInteger:;,,Rcode://Integer >> #*;,,Rcode://CompiledMethod >> #pragmasAt:;,,LPromise Definition;,,Rcode://Promise >> #reject;,,Rcode://Object >> #changeClassTo:;,,Rcode://MethodReference;,,Rcode://ClassReference;,,i,,Rcode://Text >> #format:;,,Rcode://String >> #findFeatures;,,Rcode://Collection >> #any:;,,Rcode://Collection >> #take:;,,Rcode://Collection >> #log2;,,Rcode://Collection >> #isOfSameSizeCheck:;,,Rcode://SequenceableCollection >> #=;,,LString Definition;,,LHashedCollection Definition;,,LSequenceableCollection Definition;,,LHtmlReadWriter Definition;,,i,,LDateAndTime Definition;,,Rhttp://wiki.squeak.org/squeak/6197;,,Rhttp://www.squeaksource.com/UTCDateAndTime;,,c000129000,,Rcode://Time class >> #highResClock;,,Rcode://Time class >> #nanosecondsToRun:;,,Rcode://BlockClosure >> #durationToRun;,,i,,i,,i,,i,,Rcode://PackageOrganizer >> #packageNamed:ifPresent:ifAbsent:;,,bf5cgray;,,i,,Rcode://Color banana explore;,,Rcode://Color >> #name;,,Rcode://Point >> #center:;,,Rcode://Form;,,i,,i,,i,,bf5cgray;,,i,,Rcode://FTPClient;,,i,,i,,i,,bf5cgray;,,i,,i,,i,,i,,i,,Rcode://String >> #findFeatures;,,Rcode://SystemNavigation >> #allClassesAndTraitsMatching:;,,bf5cgray;,,i,,i,,i,,bf5cgray;,,i,,i,,i,,bf5cgray;,,i,,Rcode://#isDeprecated;,,LMorphicDebugger Definition;,,LMVCDebugger Definition;,,Rcode://Symbol browseFullProtocol;,,Rcode://Compiler evaluate: '3 + ?';,,Rcode://#foo explorePointers;,,i,,i,,i,,i,,i,,bf5cgray;,,i,,Rcode://MetacelloStub;,,Rcode://Installer >> #oCompletion;,,Rcode://PreferenceWizardMorph >> #installAutoComplete;,,i,,i,,bf5cgray;,,i,,Rcode://TestRunner open;,,i,,b,,Rcode://ToolSet class;,,LWebClient Definition;,,Rcode://FileAbstractSelectionDialog;,,Rcode://Symbol class >> #internCharacter:;,,Rcode://#characterTable;,,b,,b,,Rcode://TestRunner open;,,Rcode://Form >> #collectColors:;,,Rcode://Color class >> #colorFromPixelValue:depth:;,,Rcode://SqueakSSL;,,Rhttps://en.wikipedia.org/wiki/Subject_Alternative_Name;,,Rcode://(WebClient httpGet: 'https://www.github.com') explore;,,Rcode://(WebClient httpGet: 'https://github.com') explore;,,Rcode://Project current chooseNaturalLanguage. 42;,,Rcode://MVCProject new enter;,,Rcode://FloatTest>>#testTimesTwoPowerGradualUnderflow;,,b,,Rcode://Context;,,Rcode://CompiledCode;,,Rcode://#asCodeReference;,!